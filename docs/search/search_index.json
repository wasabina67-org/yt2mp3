{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":""},{"location":"src/adjust_audio_volume/","title":"src/adjust_audio_volume.py","text":"<p>Adjust the volume of audio files in a directory to a target dBFS.</p> <p>Returns:</p> Type Description <code>None</code> <p>None</p> Source code in <code>src/adjust_audio_volume.py</code> <pre><code>def main() -&gt; None:\n    \"\"\"\n    Adjust the volume of audio files in a directory to a target dBFS.\n\n    Returns:\n        None\n    \"\"\"\n    src_dir = \"output\"\n    dest_dir = \"output_adjusted\"\n    target_dbfs = -14\n\n    for filename in os.listdir(src_dir):\n        if filename.endswith(\".mp3\"):\n            src_path = os.path.join(src_dir, filename)\n            dest_path = os.path.join(dest_dir, filename)\n\n            audio = AudioSegment.from_mp3(src_path)\n            current_dbfs = audio.dBFS\n            adjusted_audio = audio.apply_gain(target_dbfs - current_dbfs)\n            adjusted_audio.export(dest_path, format=\"mp3\")\n\n            src_id3 = ID3(src_path)\n            dest_id3 = ID3(dest_path)\n            dest_id3.update(src_id3)\n            dest_id3.save()\n</code></pre>"},{"location":"src/data_py_maker/","title":"src/data_py_maker.py","text":"<p>summary</p> Source code in <code>src/data_py_maker.py</code> <pre><code>def main():\n    \"\"\"\n    _summary_\n    \"\"\"\n    pass\n</code></pre>"},{"location":"src/run/","title":"src/run.py","text":"<p>Set artwork from YouTube thumbnail.</p> <p>Parameters:</p> Name Type Description Default <code>videoid</code> <code>str</code> <p>YouTube Video ID</p> required <code>mp3_file_path</code> <code>str</code> <p>MP3 file Path</p> required Source code in <code>src/run.py</code> <pre><code>def set_artwork(videoid, mp3_file_path):\n    \"\"\"\n    Set artwork from YouTube thumbnail.\n\n    Args:\n        videoid (str): YouTube Video ID\n        mp3_file_path (str): MP3 file Path\n    \"\"\"\n    url = f\"https://img.youtube.com/vi/{videoid}/0.jpg\"\n    artwork_file_path = f\"output/{videoid}.jpg\"\n\n    with request.urlopen(url) as r:\n        data = r.read()\n        with open(artwork_file_path, mode=\"wb\") as o:\n            o.write(data)\n\n    with Image.open(artwork_file_path) as img:\n        resized_img = img.resize((300, 300))\n        resized_img.save(artwork_file_path)\n\n    with open(artwork_file_path, mode=\"rb\") as r:\n        data = r.read()\n        tags = ID3(mp3_file_path)\n        tags.add(APIC(mime=\"image/jpeg\", type=3, data=data))\n        tags.save()\n\n    os.remove(artwork_file_path)\n</code></pre> <p>Set Metadata from metadata dict.</p> <p>Parameters:</p> Name Type Description Default <code>metadata</code> <code>dict</code> <p>metadata dict in data.py</p> required <code>mp3_file_path</code> <code>str</code> <p>MP3 file Path</p> required Source code in <code>src/run.py</code> <pre><code>def set_metadata(metadata, mp3_file_path):\n    \"\"\"\n    Set Metadata from metadata dict.\n\n    Args:\n        metadata (dict): metadata dict in data.py\n        mp3_file_path (str): MP3 file Path\n    \"\"\"\n    tags = EasyID3(mp3_file_path)\n    tags[\"title\"] = metadata[\"title\"]\n    tags[\"artist\"] = metadata[\"artist\"]\n    tags.save()\n</code></pre> <p>Downloads YouTube videos as MP3 files, validates data.py, and sets metadata.</p> <p>Raises:</p> Type Description <code>RuntimeError</code> <p>Raised if Validation fails.</p> <code>RuntimeError</code> <p>Raised if Thumbnail Image URL returns a 404 status.</p> <code>RuntimeError</code> <p>Raised if Downloading fails with non-zero return code.</p> <p>Returns:</p> Type Description <code>None</code> <p>None</p> Source code in <code>src/run.py</code> <pre><code>def main() -&gt; None:\n    \"\"\"\n    Downloads YouTube videos as MP3 files, validates data.py, and sets metadata.\n\n    Raises:\n        RuntimeError: Raised if Validation fails.\n        RuntimeError: Raised if Thumbnail Image URL returns a 404 status.\n        RuntimeError: Raised if Downloading fails with non-zero return code.\n\n    Returns:\n        None\n    \"\"\"\n    if not validate_yt_list():\n        raise RuntimeError(\"Validation failed.\")\n\n    for item in yt_list:\n        videoid = item[\"id\"]\n        output_videoid = f\"output/{videoid}\"\n        mp3_file_path = output_videoid + \".mp3\"\n\n        if os.path.isfile(mp3_file_path):\n            continue\n\n        url = f\"https://i.ytimg.com/vi/{videoid}/hqdefault.jpg\"\n        if check_video_deletion(url):\n            raise RuntimeError(\n                f\"The Thumbnail Image URL returned a 404 status. ({videoid})\"\n            )\n\n        ydl_opts[\"outtmpl\"] = output_videoid\n        with YoutubeDL(ydl_opts) as ydl:\n            url = f\"https://www.youtube.com/watch?v={videoid}\"\n            retcode = ydl.download([url])\n            if retcode != 0:\n                raise RuntimeError(\n                    f\"Downloading failed with non-zero return code. ({videoid})\"\n                )\n\n            set_metadata(item[\"metadata\"], mp3_file_path)\n            set_artwork(videoid, mp3_file_path)\n</code></pre>"},{"location":"src/utils/","title":"src/utils.py","text":"<p>Validates the YouTube video list.</p> <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p>True if validation is successful, False if any check fails.</p> Source code in <code>src/utils.py</code> <pre><code>def validate_yt_list() -&gt; bool:\n    \"\"\"\n    Validates the YouTube video list.\n\n    Returns:\n        bool: True if validation is successful, False if any check fails.\n    \"\"\"\n    seen_ids = set()\n    seen_title_artist = set()\n\n    for item in yt_list:\n        videoid = item.get(\"id\")\n        if not videoid:\n            # None or Empty\n            return False\n        if videoid in seen_ids:\n            # Duplicate\n            return False\n        seen_ids.add(videoid)\n\n        metadata = item.get(\"metadata\")\n        if not metadata:\n            # None or Empty\n            return False\n\n        title = metadata.get(\"title\")\n        if not title:\n            # None or Empty\n            return False\n\n        artist = metadata.get(\"artist\")\n        if not artist:\n            # None or Empty\n            return False\n\n        title_artist = title + artist\n        if title_artist in seen_title_artist:\n            # Duplicate\n            return False\n        seen_title_artist.add(title_artist)\n\n        return True\n</code></pre> <p>Check video deletion.</p> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>Thumbnail Image URL</p> required <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p>True if the video is deleted, False otherwise.</p> Source code in <code>src/utils.py</code> <pre><code>def check_video_deletion(url) -&gt; bool:\n    \"\"\"\n    Check video deletion.\n\n    Args:\n        url (str): Thumbnail Image URL\n\n    Returns:\n        bool: True if the video is deleted, False otherwise.\n    \"\"\"\n    resp = requests.head(url)\n    if resp.status_code == 404:\n        return True\n    return False\n</code></pre>"}]}